@page
@model IndexModel
@{
    ViewData["Title"] = "The Truck Part Depot Inc.";
}

<div class="app-container">
    <div class="top-nav">
        <button class="cart-btn" onclick="toggleCart()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
            Cart (<span id="cartCount">0</span>)
        </button>
    </div>

    <div class="search-section">
        <div class="logo-area">
            <img src="/images/ttpd-logo.png" alt="TTPD Logo" class="logo" />
            <h1 class="brand">The Truck Part Depot</h1>
            <p class="tagline">Pro Truck Parts & Data</p>
        </div>
        
        <form method="get" class="search-form" id="searchForm">
            <div class="search-wrapper">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
                <input type="text" name="query" value="@Model.Query" placeholder="Search by part number, description, or manufacturer..." class="search-input" autofocus />
                <button type="submit" class="search-btn">Search</button>
            </div>
        </form>
    </div>

    @if (Model.SearchResults != null && Model.SearchResults.Products.Any())
    {
        <div class="results-container">
            <div class="results-toolbar">
                <div class="results-info">
                    <span class="count">@Model.SearchResults.TotalResults</span> results found
                </div>
                <div class="view-toggle">
                    <button class="toggle-btn active" data-view="grid" onclick="switchView('grid')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
                        </svg>
                    </button>
                    <button class="toggle-btn" data-view="table" onclick="switchView('table')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div id="gridView" class="grid-view">
                @foreach (var product in Model.SearchResults.Products)
                {
                    <div class="product-card" onclick="window.location.href='/Product/Details?id=@product.Id'" style="cursor: pointer;">
                        <div class="card-image">
                            <img src="@product.ImageUrl" alt="@product.Description" />
                            @if (product.Tags != null && product.Tags.Any())
                            {
                                <div class="tags">
                                    @foreach (var tag in product.Tags.Take(2))
                                    {
                                        <span class="tag">@tag</span>
                                    }
                                </div>
                            }
                        </div>
                        <div class="card-body">
                            <div class="mfg">@product.Manufacturer</div>
                            <h3 class="title">@product.Description</h3>
                            <div class="part-num">Part #: @product.PartNumber</div>
                            
                            <div class="pricing">
                                <div class="price-row">
                                    <span class="label">Core Price:</span>
                                    <span class="core-price">$@product.CorePrice.ToString("N2")</span>
                                </div>
                                <div class="price-row">
                                    <span class="label">Account Price:</span>
                                    <span class="account-price">$@product.AccountPrice.ToString("N2")</span>
                                </div>
                                <div class="savings">Save $@((product.CorePrice - product.AccountPrice).ToString("N2"))</div>
                            </div>

                            @if (product.PiesAttributes != null)
                            {
                                <div class="pies-section">
                                    <h4 class="pies-title">PIES Attributes</h4>
                                    <div class="pies-grid">
                                        <div class="pies-item">
                                            <span class="pies-label">Part Type:</span>
                                            <span class="pies-value">@product.PiesAttributes.PartType</span>
                                        </div>
                                        <div class="pies-item">
                                            <span class="pies-label">Position:</span>
                                            <span class="pies-value">@product.PiesAttributes.Position</span>
                                        </div>
                                        <div class="pies-item">
                                            <span class="pies-label">Weight:</span>
                                            <span class="pies-value">@product.PiesAttributes.Weight</span>
                                        </div>
                                        <div class="pies-item">
                                            <span class="pies-label">Material:</span>
                                            <span class="pies-value">@product.PiesAttributes.Material</span>
                                        </div>
                                        <div class="pies-item">
                                            <span class="pies-label">Dimensions:</span>
                                            <span class="pies-value">@product.PiesAttributes.Dimensions</span>
                                        </div>
                                        <div class="pies-item">
                                            <span class="pies-label">Origin:</span>
                                            <span class="pies-value">@product.PiesAttributes.CountryOfOrigin</span>
                                        </div>
                                        <div class="pies-item">
                                            <span class="pies-label">Term ID:</span>
                                            <span class="pies-value">@product.PiesAttributes.PartTerminologyId</span>
                                        </div>
                                    </div>
                                </div>
                            }

                            <div class="stock-info">
                                <span class="stock-badge @(product.Quantity > 10 ? "in-stock" : "low-stock")">
                                    @product.InventoryStatus
                                </span>
                                <span class="qty">Qty: @product.Quantity</span>
                            </div>
                            <button class="add-btn" onclick="event.stopPropagation(); addToCart('@product.Id', '@product.PartNumber', '@product.Description', @product.AccountPrice);">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                }
            </div>

            <div id="tableView" class="table-view" style="display:none;">
                <table class="products-table">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Part Number</th>
                            <th>Description</th>
                            <th>Manufacturer</th>
                            <th>Core Price</th>
                            <th>Account Price</th>
                            <th>PIES Type</th>
                            <th>Position</th>
                            <th>Material</th>
                            <th>Stock</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var product in Model.SearchResults.Products)
                        {
                            <tr onclick="window.location.href='/Product/Details?id=@product.Id'" style="cursor: pointer;">
                                <td><img src="@product.ImageUrl" alt="@product.Description" class="table-img" /></td>
                                <td><strong>@product.PartNumber</strong></td>
                                <td>@product.Description</td>
                                <td>@product.Manufacturer</td>
                                <td class="strike">$@product.CorePrice.ToString("N2")</td>
                                <td class="price-highlight">$@product.AccountPrice.ToString("N2")</td>
                                <td>@product.PiesAttributes?.PartType</td>
                                <td>@product.PiesAttributes?.Position</td>
                                <td>@product.PiesAttributes?.Material</td>
                                <td><span class="stock-badge @(product.Quantity > 10 ? "in-stock" : "low-stock")">@product.InventoryStatus</span></td>
                                <td><button class="table-add-btn" onclick="event.stopPropagation(); addToCart('@product.Id', '@product.PartNumber', '@product.Description', @product.AccountPrice);">Add</button></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
    else if (!string.IsNullOrEmpty(Model.Query))
    {
        <div class="no-results">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
            </svg>
            <h2>No Results Found</h2>
            <p>Try different keywords or check your spelling</p>
        </div>
    }
</div>

<div id="cartModal" class="cart-modal">
    <div class="cart-content">
        <div class="cart-header">
            <h2>Shopping Cart</h2>
            <button class="close-btn" onclick="toggleCart()">×</button>
        </div>
        <div id="cartItems" class="cart-items"></div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" onclick="alert('Checkout functionality coming soon!')">Checkout</button>
        </div>
    </div>
</div>

<div id="notification" class="notification"></div>

<style>
@@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #F5F5F5;
    color: #353838;
}

.app-container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 20px;
}

.top-nav {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 20px;
}

.cart-btn {
    background: #931310;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
    font-family: 'Inter', sans-serif;
}

.cart-btn:hover {
    background: #7a0f0d;
}

.search-section {
    background: #353838;
    padding: 60px 40px;
    border-radius: 12px;
    margin-bottom: 30px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
}

.logo-area {
    text-align: center;
    margin-bottom: 30px;
}

.logo {
    width: 180px;
    height: auto;
    margin-bottom: 15px;
}

.brand {
    font-size: 2.5rem;
    font-weight: 800;
    color: white;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
}

.tagline {
    color: rgba(255,255,255,0.85);
    font-size: 1rem;
    font-weight: 500;
    letter-spacing: 0.5px;
}

.search-wrapper {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    background: white;
    border-radius: 8px;
    padding: 8px 8px 8px 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.search-icon {
    color: #353838;
    margin-right: 15px;
}

.search-input {
    flex: 1;
    border: none;
    font-size: 1rem;
    outline: none;
    padding: 12px 0;
    font-family: 'Inter', sans-serif;
}

.search-btn {
    background: #931310;
    color: white;
    border: none;
    padding: 14px 35px;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'Inter', sans-serif;
}

.search-btn:hover {
    background: #7a0f0d;
    transform: translateY(-1px);
}

.results-container {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.results-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid #F5F5F5;
}

.results-info {
    font-size: 1.1rem;
    color: #353838;
    font-weight: 500;
}

.count {
    font-weight: 700;
    color: #931310;
    font-size: 1.3rem;
}

.view-toggle {
    display: flex;
    gap: 8px;
}

.toggle-btn {
    background: #F5F5F5;
    border: 2px solid #e0e0e0;
    padding: 10px 16px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.toggle-btn:hover {
    background: #e8e8e8;
}

.toggle-btn.active {
    background: #353838;
    border-color: #353838;
    color: white;
}

.grid-view {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.product-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s;
}

.product-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    border-color: #931310;
}

.card-image {
    height: 140px;
    background: #F5F5F5;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.card-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.tags {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.tag {
    background: #931310;
    color: white;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
}

.card-body {
    padding: 15px;
}

.mfg {
    color: #931310;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 8px;
    letter-spacing: 0.5px;
}

.title {
    font-size: 1.05rem;
    font-weight: 600;
    margin-bottom: 8px;
    color: #353838;
    line-height: 1.4;
}

.part-num {
    color: #666;
    font-size: 0.9rem;
    margin-bottom: 15px;
    font-family: monospace;
}

.pricing {
    background: #F5F5F5;
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 15px;
    border: 1px solid #e0e0e0;
}

.price-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
}

.label {
    color: #666;
    font-size: 0.85rem;
    font-weight: 600;
}

.core-price {
    text-decoration: line-through;
    color: #999;
    font-weight: 600;
    font-size: 1rem;
}

.account-price {
    color: #931310;
    font-size: 1.4rem;
    font-weight: 700;
}

.savings {
    text-align: right;
    color: #353838;
    font-weight: 700;
    font-size: 0.9rem;
    margin-top: 5px;
}

.pies-section {
    background: #F5F5F5;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 15px;
    border: 1px solid #e0e0e0;
}

.pies-title {
    font-size: 0.9rem;
    font-weight: 700;
    color: #353838;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.pies-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 8px;
}

.pies-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #e0e0e0;
}

.pies-item:last-child {
    border-bottom: none;
}

.pies-label {
    font-size: 0.8rem;
    color: #666;
    font-weight: 600;
}

.pies-value {
    font-size: 0.8rem;
    color: #353838;
    font-weight: 500;
}

.stock-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.stock-badge {
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 600;
}

.in-stock {
    background: #d4edda;
    color: #155724;
}

.low-stock {
    background: #f8d7da;
    color: #721c24;
}

.qty {
    color: #666;
    font-size: 0.9rem;
}

.add-btn {
    width: 100%;
    background: #931310;
    color: white;
    border: none;
    padding: 12px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'Inter', sans-serif;
}

.add-btn:hover {
    background: #7a0f0d;
}

.table-view {
    overflow-x: auto;
}

.products-table {
    width: 100%;
    border-collapse: collapse;
}

.products-table th {
    background: #353838;
    color: white;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    font-size: 0.9rem;
}

.products-table td {
    padding: 15px;
    border-bottom: 1px solid #e0e0e0;
    font-size: 0.9rem;
}

.products-table tbody tr:hover {
    background: #F5F5F5;
}

.table-img {
    width: 60px;
    height: 60px;
    object-fit: contain;
    background: #F5F5F5;
    border-radius: 4px;
}

.strike {
    text-decoration: line-through;
    color: #999;
}

.price-highlight {
    color: #931310;
    font-weight: 700;
    font-size: 1.1rem;
}

.table-add-btn {
    background: #931310;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
    font-family: 'Inter', sans-serif;
}

.table-add-btn:hover {
    background: #7a0f0d;
}

.no-results {
    text-align: center;
    padding: 100px 20px;
    background: white;
    border-radius: 12px;
}

.no-results svg {
    color: #ccc;
    margin-bottom: 20px;
}

.no-results h2 {
    color: #353838;
    margin-bottom: 10px;
}

.no-results p {
    color: #666;
}

.notification {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #931310;
    color: white;
    padding: 16px 24px;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(147, 19, 16, 0.3);
    display: none;
    font-weight: 600;
    z-index: 1000;
}

.notification.show {
    display: block;
    animation: slideIn 0.3s;
}

.cart-modal {
    display: none;
    position: fixed;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 2000;
}

.cart-modal.show {
    display: block;
}

.cart-content {
    position: absolute;
    top: 0;
    right: 0;
    width: 400px;
    height: 100%;
    background: white;
    box-shadow: -4px 0 12px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    animation: slideInRight 0.3s;
}

.cart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: #353838;
    color: white;
}

.cart-header h2 {
    font-size: 1.3rem;
    margin: 0;
}

.close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 2rem;
    cursor: pointer;
    line-height: 1;
}

.cart-items {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

.cart-item {
    display: flex;
    gap: 15px;
    padding: 15px;
    border-bottom: 1px solid #e0e0e0;
}

.cart-item-info {
    flex: 1;
}

.cart-item-name {
    font-weight: 600;
    color: #353838;
    margin-bottom: 5px;
}

.cart-item-part {
    font-size: 0.85rem;
    color: #666;
    font-family: monospace;
    margin-bottom: 5px;
}

.cart-item-price {
    color: #931310;
    font-weight: 700;
}

.cart-item-qty {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
}

.qty-btn-small {
    background: #F5F5F5;
    border: 1px solid #e0e0e0;
    width: 24px;
    height: 24px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 700;
}

.remove-btn {
    background: none;
    border: none;
    color: #931310;
    cursor: pointer;
    font-size: 1.2rem;
}

.cart-footer {
    padding: 20px;
    border-top: 2px solid #e0e0e0;
    background: #F5F5F5;
}

.cart-total {
    display: flex;
    justify-content: space-between;
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 15px;
    color: #353838;
}

.checkout-btn {
    width: 100%;
    background: #931310;
    color: white;
    border: none;
    padding: 14px;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    font-family: 'Inter', sans-serif;
}

.checkout-btn:hover {
    background: #7a0f0d;
}

.empty-cart {
    text-align: center;
    padding: 60px 20px;
    color: #666;
}

@@keyframes slideInRight {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
}

@@keyframes slideIn {
    from { transform: translateX(400px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
</style>

<script>
function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const count = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cartCount').textContent = count;
}

function toggleCart() {
    const modal = document.getElementById('cartModal');
    modal.classList.toggle('show');
    if (modal.classList.contains('show')) {
        renderCart();
    }
}

function renderCart() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const container = document.getElementById('cartItems');
    
    if (cart.length === 0) {
        container.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
        document.getElementById('cartTotal').textContent = '$0.00';
        return;
    }
    
    let total = 0;
    container.innerHTML = cart.map(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        return `
            <div class="cart-item">
                <div class="cart-item-info">
                    <div class="cart-item-name">${item.desc}</div>
                    <div class="cart-item-part">${item.partNum}</div>
                    <div class="cart-item-price">$${item.price.toFixed(2)} each</div>
                    <div class="cart-item-qty">
                        <button class="qty-btn-small" onclick="updateQty('${item.id}', -1)">-</button>
                        <span>${item.quantity}</span>
                        <button class="qty-btn-small" onclick="updateQty('${item.id}', 1)">+</button>
                    </div>
                </div>
                <button class="remove-btn" onclick="removeFromCart('${item.id}')">×</button>
            </div>
        `;
    }).join('');
    
    document.getElementById('cartTotal').textContent = '$' + total.toFixed(2);
}

function updateQty(id, change) {
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const item = cart.find(i => i.id === id);
    if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
            cart = cart.filter(i => i.id !== id);
        }
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
    updateCartCount();
}

function removeFromCart(id) {
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    cart = cart.filter(i => i.id !== id);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
    updateCartCount();
}

function switchView(view) {
    document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`[data-view="${view}"]`).classList.add('active');
    
    if (view === 'grid') {
        document.getElementById('gridView').style.display = 'grid';
        document.getElementById('tableView').style.display = 'none';
    } else {
        document.getElementById('gridView').style.display = 'none';
        document.getElementById('tableView').style.display = 'block';
    }
}

function addToCart(id, partNum, desc, price) {
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const existing = cart.find(item => item.id === id);
    
    if (existing) {
        existing.quantity++;
    } else {
        cart.push({ id, partNum, desc, price, quantity: 1 });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    
    const notif = document.getElementById('notification');
    notif.textContent = `Added ${partNum} to cart`;
    notif.classList.add('show');
    setTimeout(() => notif.classList.remove('show'), 3000);
}

window.addEventListener('load', updateCartCount);
</script>
